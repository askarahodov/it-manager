[pytest]
# Интеграционные тесты используют один общий event loop на весь прогон.
# Причина: asyncpg-пул привязывается к loop, а при loop-per-test возникает
# "Future attached to a different loop" при последующих запросах/коммитах.
asyncio_mode = auto
asyncio_default_fixture_loop_scope = session
asyncio_default_test_loop_scope = session

# Чтобы вывод в CI/скрипте был компактным, но при этом сохранялась ошибка.
addopts = -q

filterwarnings =
    ignore:'crypt' is deprecated.*:DeprecationWarning:passlib
